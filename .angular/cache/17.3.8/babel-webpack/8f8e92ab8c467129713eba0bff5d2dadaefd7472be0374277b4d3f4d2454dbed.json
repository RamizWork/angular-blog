{"ast":null,"code":"import { UntypedFormControl, UntypedFormGroup, Validators } from \"@angular/forms\";\nimport { switchMap } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../shared/services/post.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"ngx-quill\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/legacy-button\";\nconst _c0 = a0 => ({\n  invalid: a0\n});\nfunction EditPageComponent_div_0_div_6_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \" Enter post title \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditPageComponent_div_0_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtemplate(1, EditPageComponent_div_0_div_6_small_1_Template, 2, 0, \"small\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_3_0;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx_r1.form.get(\"title\").errors) == null ? null : tmp_3_0.required);\n  }\n}\nfunction EditPageComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", 2);\n    i0.ɵɵlistener(\"ngSubmit\", function EditPageComponent_div_0_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.submit());\n    });\n    i0.ɵɵelementStart(2, \"div\", 3)(3, \"label\", 4);\n    i0.ɵɵtext(4, \"Post title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 5);\n    i0.ɵɵtemplate(6, EditPageComponent_div_0_div_6_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 7);\n    i0.ɵɵelement(8, \"quill-editor\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 9);\n    i0.ɵɵtext(10, \"Update \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    let tmp_3_0;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, ((tmp_3_0 = ctx_r1.form.get(\"email\")) == null ? null : tmp_3_0.touched) && ctx_r1.form.get(\"email\").invalid));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"title\").touched && ctx_r1.form.get(\"title\").invalid);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.form.invalid);\n  }\n}\nfunction EditPageComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 12);\n    i0.ɵɵtext(1, \"Loading ...\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class EditPageComponent {\n  constructor(route, postService, toastrService, router) {\n    this.route = route;\n    this.postService = postService;\n    this.toastrService = toastrService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.editPageForm$ = this.route.params.pipe(switchMap(params => {\n      return this.postService.getPostId([params['id']]);\n    })).subscribe(post => {\n      this.post = post;\n      this.form = new UntypedFormGroup({\n        title: new UntypedFormControl(post.title, Validators.required),\n        text: new UntypedFormControl(post.text, Validators.required)\n      });\n    });\n  }\n  submit() {\n    if (this.form.invalid) {\n      return;\n    }\n    this.updateSubscription$ = this.postService.updatePost({\n      id: this.post?.id,\n      text: this.form.value.text,\n      title: this.form.value.title,\n      date: new Date()\n    }).subscribe(() => {\n      this.toastrService.success('Post changed');\n      this.router.navigate(['/admin/dashboard']);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription$?.unsubscribe();\n    this.editPageForm$?.unsubscribe();\n  }\n  static #_ = this.ɵfac = function EditPageComponent_Factory(t) {\n    return new (t || EditPageComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditPageComponent,\n    selectors: [[\"app-edit-page\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[\"loading\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-control\", 3, \"ngClass\"], [\"for\", \"title\"], [\"id\", \"title\", \"type\", \"text\", \"formControlName\", \"title\"], [\"class\", \"validation\", 4, \"ngIf\"], [1, \"form-control\"], [\"formControlName\", \"text\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 1, \"button__edit\", 3, \"disabled\"], [1, \"validation\"], [4, \"ngIf\"], [1, \"text-centre\"]],\n    template: function EditPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, EditPageComponent_div_0_Template, 11, 6, \"div\", 1)(1, EditPageComponent_ng_template_1_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const loading_r3 = i0.ɵɵreference(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.form)(\"ngIfElse\", loading_r3);\n      }\n    },\n    dependencies: [i4.QuillEditorComponent, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i6.NgClass, i6.NgIf, i5.FormGroupDirective, i5.FormControlName, i7.MatLegacyButton],\n    styles: [\".button__edit[_ngcontent-%COMP%] {\\n  background-color: #4351a9;\\n  color: white;\\n  margin-bottom: 20px;\\n}\\n.button__edit[_ngcontent-%COMP%]:disabled {\\n  color: white;\\n  background-color: #bdbdbd;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWRtaW4vZWRpdC1wYWdlL2VkaXQtcGFnZS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL1Byb2dlY3QlMjBmb3IlMjBsZWFybmluZy9hbmd1bGFyLWJsb2cvc3JjL2FwcC9hZG1pbi9lZGl0LXBhZ2UvZWRpdC1wYWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7QUNDRjtBREFFO0VBQ0UsWUFBQTtFQUNBLHlCQUFBO0FDRUoiLCJzb3VyY2VzQ29udGVudCI6WyIuYnV0dG9uX19lZGl0IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDM1MWE5O1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gICY6ZGlzYWJsZWQge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2JkYmRiZDtcclxuICB9XHJcbn1cclxuIiwiLmJ1dHRvbl9fZWRpdCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM0MzUxYTk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbn1cbi5idXR0b25fX2VkaXQ6ZGlzYWJsZWQge1xuICBjb2xvcjogd2hpdGU7XG4gIGJhY2tncm91bmQtY29sb3I6ICNiZGJkYmQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["UntypedFormControl","UntypedFormGroup","Validators","switchMap","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","EditPageComponent_div_0_div_6_small_1_Template","ɵɵadvance","ɵɵproperty","tmp_3_0","ctx_r1","form","get","errors","required","ɵɵlistener","EditPageComponent_div_0_Template_form_ngSubmit_1_listener","ɵɵrestoreView","_r1","ɵɵnextContext","ɵɵresetView","submit","ɵɵelement","EditPageComponent_div_0_div_6_Template","ɵɵpureFunction1","_c0","touched","invalid","EditPageComponent","constructor","route","postService","toastrService","router","ngOnInit","editPageForm$","params","pipe","getPostId","subscribe","post","title","text","updateSubscription$","updatePost","id","value","date","Date","success","navigate","ngOnDestroy","unsubscribe","_","ɵɵdirectiveInject","i1","ActivatedRoute","i2","PostService","i3","ToastrService","Router","_2","selectors","decls","vars","consts","template","EditPageComponent_Template","rf","ctx","EditPageComponent_div_0_Template","EditPageComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","loading_r3"],"sources":["C:\\Progect for learning\\angular-blog\\src\\app\\admin\\edit-page\\edit-page.component.ts","C:\\Progect for learning\\angular-blog\\src\\app\\admin\\edit-page\\edit-page.component.html"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ActivatedRoute, Params, Router} from \"@angular/router\";\r\nimport {Subscription} from \"rxjs\";\r\nimport {ToastrService} from \"ngx-toastr\";\r\nimport {UntypedFormControl, UntypedFormGroup, Validators} from \"@angular/forms\";\r\nimport {switchMap} from \"rxjs/operators\";\r\n\r\nimport {PostInterface} from \"../shared/interfaces/post.interface\";\r\nimport {PostService} from \"../shared/services/post.service\";\r\n\r\n@Component({\r\n  selector: 'app-edit-page',\r\n  templateUrl: './edit-page.component.html',\r\n  styleUrls: ['./edit-page.component.scss']\r\n})\r\nexport class EditPageComponent implements OnInit, OnDestroy {\r\n\r\n  form: UntypedFormGroup | any;\r\n  post: PostInterface | undefined;\r\n  updateSubscription$: Subscription | undefined;\r\n  editPageForm$: Subscription| undefined;\r\n\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private postService: PostService,\r\n    private toastrService: ToastrService,\r\n    private router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.editPageForm$ = this.route.params.pipe(\r\n      switchMap((params: Params) => {\r\n        return this.postService.getPostId([params['id']])\r\n      })\r\n    ).subscribe((post: PostInterface) => {\r\n      this.post = post;\r\n      this.form = new UntypedFormGroup({\r\n        title: new UntypedFormControl(post.title, Validators.required),\r\n        text: new UntypedFormControl(post.text, Validators.required)\r\n      });\r\n    });\r\n  }\r\n\r\n  submit() {\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.updateSubscription$ = this.postService.updatePost({\r\n      id: this.post?.id,\r\n      text: this.form.value.text,\r\n      title: this.form.value.title,\r\n      date: new Date()\r\n    }).subscribe(() => {\r\n      this.toastrService.success('Post changed');\r\n      this.router.navigate(['/admin/dashboard']);\r\n    })\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.updateSubscription$?.unsubscribe();\r\n    this.editPageForm$?.unsubscribe();\r\n  }\r\n\r\n}\r\n","<div *ngIf=\"form; else loading\">\r\n  <form [formGroup]=\"form\" (ngSubmit)=\"submit()\">\r\n    <div\r\n      [ngClass]=\"{invalid: form.get('email')?.touched && form.get('email').invalid}\"\r\n      class=\"form-control\">\r\n      <label for=\"title\">Post title</label>\r\n      <input id=\"title\" type=\"text\" formControlName=\"title\">\r\n      <div *ngIf=\"form.get('title').touched && form.get('title').invalid\"\r\n           class=\"validation\">\r\n        <small *ngIf=\"form.get('title').errors?.required\">\r\n          Enter post title\r\n        </small>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-control\">\r\n      <quill-editor formControlName=\"text\"></quill-editor>\r\n    </div>\r\n    <button\r\n      mat-raised-button\r\n      class=\"button__edit\"\r\n      type=\"submit\"\r\n      [disabled]=\"form.invalid\">Update\r\n    </button>\r\n  </form>\r\n</div>\r\n\r\n<ng-template #loading>\r\n  <p class=\"text-centre\">Loading ...</p>\r\n</ng-template>\r\n"],"mappings":"AAIA,SAAQA,kBAAkB,EAAEC,gBAAgB,EAAEC,UAAU,QAAO,gBAAgB;AAC/E,SAAQC,SAAS,QAAO,gBAAgB;;;;;;;;;;;;;;ICIhCC,EAAA,CAAAC,cAAA,YAAkD;IAChDD,EAAA,CAAAE,MAAA,yBACF;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;;IAJVH,EAAA,CAAAC,cAAA,cACwB;IACtBD,EAAA,CAAAI,UAAA,IAAAC,8CAAA,oBAAkD;IAGpDL,EAAA,CAAAG,YAAA,EAAM;;;;;IAHIH,EAAA,CAAAM,SAAA,EAAwC;IAAxCN,EAAA,CAAAO,UAAA,UAAAC,OAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAC,GAAA,UAAAC,MAAA,mBAAAJ,OAAA,CAAAK,QAAA,CAAwC;;;;;;IARtDb,EADF,CAAAC,cAAA,UAAgC,cACiB;IAAtBD,EAAA,CAAAc,UAAA,sBAAAC,0DAAA;MAAAf,EAAA,CAAAgB,aAAA,CAAAC,GAAA;MAAA,MAAAR,MAAA,GAAAT,EAAA,CAAAkB,aAAA;MAAA,OAAAlB,EAAA,CAAAmB,WAAA,CAAYV,MAAA,CAAAW,MAAA,EAAQ;IAAA,EAAC;IAI1CpB,EAHF,CAAAC,cAAA,aAEuB,eACF;IAAAD,EAAA,CAAAE,MAAA,iBAAU;IAAAF,EAAA,CAAAG,YAAA,EAAQ;IACrCH,EAAA,CAAAqB,SAAA,eAAsD;IACtDrB,EAAA,CAAAI,UAAA,IAAAkB,sCAAA,iBACwB;IAK1BtB,EAAA,CAAAG,YAAA,EAAM;IACNH,EAAA,CAAAC,cAAA,aAA0B;IACxBD,EAAA,CAAAqB,SAAA,sBAAoD;IACtDrB,EAAA,CAAAG,YAAA,EAAM;IACNH,EAAA,CAAAC,cAAA,gBAI4B;IAAAD,EAAA,CAAAE,MAAA,eAC5B;IAEJF,EAFI,CAAAG,YAAA,EAAS,EACJ,EACH;;;;;IAvBEH,EAAA,CAAAM,SAAA,EAAkB;IAAlBN,EAAA,CAAAO,UAAA,cAAAE,MAAA,CAAAC,IAAA,CAAkB;IAEpBV,EAAA,CAAAM,SAAA,EAA8E;IAA9EN,EAAA,CAAAO,UAAA,YAAAP,EAAA,CAAAuB,eAAA,IAAAC,GAAA,IAAAhB,OAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAC,GAAA,4BAAAH,OAAA,CAAAiB,OAAA,KAAAhB,MAAA,CAAAC,IAAA,CAAAC,GAAA,UAAAe,OAAA,EAA8E;IAIxE1B,EAAA,CAAAM,SAAA,GAA4D;IAA5DN,EAAA,CAAAO,UAAA,SAAAE,MAAA,CAAAC,IAAA,CAAAC,GAAA,UAAAc,OAAA,IAAAhB,MAAA,CAAAC,IAAA,CAAAC,GAAA,UAAAe,OAAA,CAA4D;IAclE1B,EAAA,CAAAM,SAAA,GAAyB;IAAzBN,EAAA,CAAAO,UAAA,aAAAE,MAAA,CAAAC,IAAA,CAAAgB,OAAA,CAAyB;;;;;IAM7B1B,EAAA,CAAAC,cAAA,YAAuB;IAAAD,EAAA,CAAAE,MAAA,kBAAW;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;ADZxC,OAAM,MAAOwB,iBAAiB;EAQ5BC,YACUC,KAAqB,EACrBC,WAAwB,EACxBC,aAA4B,EAC5BC,MAAc;IAHd,KAAAH,KAAK,GAALA,KAAK;IACL,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAAC,MAAM,GAANA,MAAM;EAEhB;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,GAAG,IAAI,CAACL,KAAK,CAACM,MAAM,CAACC,IAAI,CACzCrC,SAAS,CAAEoC,MAAc,IAAI;MAC3B,OAAO,IAAI,CAACL,WAAW,CAACO,SAAS,CAAC,CAACF,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IACnD,CAAC,CAAC,CACH,CAACG,SAAS,CAAEC,IAAmB,IAAI;MAClC,IAAI,CAACA,IAAI,GAAGA,IAAI;MAChB,IAAI,CAAC7B,IAAI,GAAG,IAAIb,gBAAgB,CAAC;QAC/B2C,KAAK,EAAE,IAAI5C,kBAAkB,CAAC2C,IAAI,CAACC,KAAK,EAAE1C,UAAU,CAACe,QAAQ,CAAC;QAC9D4B,IAAI,EAAE,IAAI7C,kBAAkB,CAAC2C,IAAI,CAACE,IAAI,EAAE3C,UAAU,CAACe,QAAQ;OAC5D,CAAC;IACJ,CAAC,CAAC;EACJ;EAEAO,MAAMA,CAAA;IACJ,IAAI,IAAI,CAACV,IAAI,CAACgB,OAAO,EAAE;MACrB;IACF;IAEA,IAAI,CAACgB,mBAAmB,GAAG,IAAI,CAACZ,WAAW,CAACa,UAAU,CAAC;MACrDC,EAAE,EAAE,IAAI,CAACL,IAAI,EAAEK,EAAE;MACjBH,IAAI,EAAE,IAAI,CAAC/B,IAAI,CAACmC,KAAK,CAACJ,IAAI;MAC1BD,KAAK,EAAE,IAAI,CAAC9B,IAAI,CAACmC,KAAK,CAACL,KAAK;MAC5BM,IAAI,EAAE,IAAIC,IAAI;KACf,CAAC,CAACT,SAAS,CAAC,MAAK;MAChB,IAAI,CAACP,aAAa,CAACiB,OAAO,CAAC,cAAc,CAAC;MAC1C,IAAI,CAAChB,MAAM,CAACiB,QAAQ,CAAC,CAAC,kBAAkB,CAAC,CAAC;IAC5C,CAAC,CAAC;EACJ;EAEAC,WAAWA,CAAA;IACT,IAAI,CAACR,mBAAmB,EAAES,WAAW,EAAE;IACvC,IAAI,CAACjB,aAAa,EAAEiB,WAAW,EAAE;EACnC;EAAC,QAAAC,CAAA,G;qBAjDUzB,iBAAiB,EAAA3B,EAAA,CAAAqD,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAvD,EAAA,CAAAqD,iBAAA,CAAAG,EAAA,CAAAC,WAAA,GAAAzD,EAAA,CAAAqD,iBAAA,CAAAK,EAAA,CAAAC,aAAA,GAAA3D,EAAA,CAAAqD,iBAAA,CAAAC,EAAA,CAAAM,MAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAjBlC,iBAAiB;IAAAmC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCW9BpE,EA1BA,CAAAI,UAAA,IAAAkE,gCAAA,kBAAgC,IAAAC,wCAAA,gCAAAvE,EAAA,CAAAwE,sBAAA,CA0BV;;;;QA1BJxE,EAAZ,CAAAO,UAAA,SAAA8D,GAAA,CAAA3D,IAAA,CAAY,aAAA+D,UAAA,CAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}