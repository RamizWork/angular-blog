{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./admin/shared/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./admin/shared/services/user.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./header/header.component\";\nfunction AppComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nexport class AppComponent {\n  constructor(authService, router, userService) {\n    this.authService = authService;\n    this.router = router;\n    this.userService = userService;\n  }\n  ngOnInit() {\n    this.isAuthenticated();\n    this.userData$ = this.userService.getUserData();\n  }\n  isAuthenticated() {\n    let fbExpToken = localStorage.getItem('fb-exp-token');\n    if (fbExpToken) {\n      fbExpToken = new Date(fbExpToken);\n      let second = (fbExpToken.getTime() - Date.now()) / 1000 / 60;\n      if (Date.now() > +fbExpToken) {\n        localStorage.clear();\n        this.authService.logout();\n        this.router.navigate(['']);\n        this.authService.setIsAuthenticatedStatus(false);\n      } else {\n        this.authService.setIsAuthenticatedStatus(true);\n      }\n    }\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserService));\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 4,\n  vars: 3,\n  consts: [[4, \"ngIf\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-header\")(1, \"router-outlet\");\n      i0.ɵɵtemplate(2, AppComponent_ng_container_2_Template, 1, 0, \"ng-container\", 0);\n      i0.ɵɵpipe(3, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 1, ctx.userData$));\n    }\n  },\n  dependencies: [i4.NgIf, i2.RouterOutlet, i5.HeaderComponent, i4.AsyncPipe],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementContainer","AppComponent","constructor","authService","router","userService","ngOnInit","isAuthenticated","userData$","getUserData","fbExpToken","localStorage","getItem","Date","second","getTime","now","clear","logout","navigate","setIsAuthenticatedStatus","ɵɵdirectiveInject","i1","AuthService","i2","Router","i3","UserService","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","AppComponent_ng_container_2_Template","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1"],"sources":["C:\\Progect for learning\\angular-blog\\src\\app\\app.component.ts","C:\\Progect for learning\\angular-blog\\src\\app\\app.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport {AuthService} from \"./admin/shared/services/auth.service\";\r\nimport {Router} from \"@angular/router\";\r\nimport {Observable} from \"rxjs\";\r\n\r\nimport {ResponseForIdentificatedEmailInterface} from \"./admin/shared/interfaces/responseForIdentificatedEmail.interface\";\r\nimport {UserService} from \"./admin/shared/services/user.service\";\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n\r\n  userData$: Observable<ResponseForIdentificatedEmailInterface | null> | undefined;\r\n\r\n  constructor(private authService: AuthService, private router: Router, private userService: UserService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.isAuthenticated();\r\n    this.userData$ = this.userService.getUserData();\r\n  }\r\n\r\n  isAuthenticated() {\r\n    let fbExpToken: string | null | undefined | Date = localStorage.getItem('fb-exp-token');\r\n    if (fbExpToken) {\r\n      fbExpToken = new Date(fbExpToken);\r\n      let second = (((((fbExpToken.getTime())) - Date.now()) / 1000) / 60);\r\n\r\n      if (Date.now() > +fbExpToken) {\r\n        localStorage.clear();\r\n        this.authService.logout();\r\n        this.router.navigate(['']);\r\n        this.authService.setIsAuthenticatedStatus(false);\r\n      } else {\r\n        this.authService.setIsAuthenticatedStatus(true);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<app-header></app-header>\r\n<router-outlet></router-outlet>\r\n<ng-container *ngIf=\"userData$ | async\"></ng-container>\r\n"],"mappings":";;;;;;;;ICEAA,EAAA,CAAAC,kBAAA,GAAuD;;;ADWvD,OAAM,MAAOC,YAAY;EAIvBC,YAAoBC,WAAwB,EAAUC,MAAc,EAAUC,WAAwB;IAAlF,KAAAF,WAAW,GAAXA,WAAW;IAAuB,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,WAAW,GAAXA,WAAW;EACzF;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACC,eAAe,EAAE;IACtB,IAAI,CAACC,SAAS,GAAG,IAAI,CAACH,WAAW,CAACI,WAAW,EAAE;EACjD;EAEAF,eAAeA,CAAA;IACb,IAAIG,UAAU,GAAqCC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IACvF,IAAIF,UAAU,EAAE;MACdA,UAAU,GAAG,IAAIG,IAAI,CAACH,UAAU,CAAC;MACjC,IAAII,MAAM,GAAK,CAAGJ,UAAU,CAACK,OAAO,EAAE,GAAKF,IAAI,CAACG,GAAG,EAAE,IAAI,IAAI,GAAI,EAAG;MAEpE,IAAIH,IAAI,CAACG,GAAG,EAAE,GAAG,CAACN,UAAU,EAAE;QAC5BC,YAAY,CAACM,KAAK,EAAE;QACpB,IAAI,CAACd,WAAW,CAACe,MAAM,EAAE;QACzB,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,CAAChB,WAAW,CAACiB,wBAAwB,CAAC,KAAK,CAAC;MAClD,CAAC,MAAM;QACL,IAAI,CAACjB,WAAW,CAACiB,wBAAwB,CAAC,IAAI,CAAC;MACjD;IACF;EACF;;;mBA3BWnB,YAAY,EAAAF,EAAA,CAAAsB,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAxB,EAAA,CAAAsB,iBAAA,CAAAG,EAAA,CAAAC,MAAA,GAAA1B,EAAA,CAAAsB,iBAAA,CAAAK,EAAA,CAAAC,WAAA;AAAA;;QAAZ1B,YAAY;EAAA2B,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCZzBnC,EADA,CAAAqC,SAAA,iBAAyB,oBACM;MAC/BrC,EAAA,CAAAsC,UAAA,IAAAC,oCAAA,0BAAwC;;;;MAAzBvC,EAAA,CAAAwC,SAAA,GAAuB;MAAvBxC,EAAA,CAAAyC,UAAA,SAAAzC,EAAA,CAAA0C,WAAA,OAAAN,GAAA,CAAA3B,SAAA,EAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}